extends layout

block content
  h1
    | #{animal.name.value} - 
    - if (animal.id)
      small
        code(style="text-transform:initial")
          strong
            | #{animal.id}
 
  div.row
    div.col
      div(class="card m-2")
        div.card-body
          div.container
            div.row
              - if (animal.species.value == 'dairy cattle')
                div.col-lg-3
                  img.img-thumbnail(src=`/img/cow-${imgId}.jpg` width="256px" height="256px") 
              div.col-lg-9
                dl.row
                  - if (animal.species)
                    dt.col-lg-3 Species: 
                    dd.col-lg-9 #{animal.species.value}
                  - if (animal.legalId||animal.legalID.value)
                    dt.col-lg-3 Legal ID: 
                    dd.col-lg-9
                      code #{animal.legalId.value||animal.legalID.value}
                  - if (animal.phenologicalCondition)
                    dt.col-lg-3 Phenological
                      br 
                      | Condition: 
                    dd.col-lg-3 #{animal.phenologicalCondition.vocab||animal.phenologicalCondition}
                  - if (animal.reproductiveCondition)
                    dt.col-lg-3 Reproductive
                      br
                      | Condition: 
                    dd.col-lg-3 #{animal.reproductiveCondition.vocab||animal.reproductiveCondition}
                  - if (animal.healthCondition)
                    dt.col-lg-3 Health: 
                    dd.col-lg-9 #{animal.healthCondition.vocab||animal.healthCondition}
                  - if (animal.sex)
                    dt.col-lg-3 Sex: 
                    dd.col-lg-3 #{animal.sex.vocab||animal.sex}
                    dt.col-lg-3 Date of Birth: 
                    dd.col-lg-3 #{animal.birthdate ? animal.birthdate.value.substring(0,10) : 'unknown'}
                  - if (animal.fedWith)
                    dt.col-lg-3 Fed With: 
                    dd.col-lg-3 #{animal.fedWith.value}
                    - if (animal.weight)
                      dt.col-lg-3 Weight
                      dd.col-lg-3
                        | #{animal.weight.value} kgs
                  - if (animal.calvedBy)
                    dt.col-lg-3 Calved by:
                    dd.col-lg-9
                      a(class="link-underline link-underline-opacity-0" href=`/app/animal/${animal.calvedBy.object}`) #{animal.calvedBy.object}
                  - if (animal.siredBy)
                    dt.col-lg-3 Sired by:
                    dd.col-lg-9
                      a(class="link-underline link-underline-opacity-0" href=`/app/animal/${animal.siredBy.object}`) #{animal.siredBy.object}
                  
                  - if (animal.heartRate)
                    div.col-lg-6
                    dt.col-lg-3 Heart Rate
                    dd.col-lg-3
                      | #{animal.heartRate.value} bpm
                  - if (animal.locatedAt)
                    dt.col-lg-3 Located At:
                    - if (animal.location)
                        dd.col-lg-3 
                          - if (animal.locatedAt.object.includes('AgriParcel'))
                            a(class="link-underline link-underline-opacity-0" href=`/app/agriparcel/${animal.locatedAt.object}`) #{animal.locatedAt.object}
                          - if (animal.locatedAt.object.includes('Building'))
                            a(class="link-underline link-underline-opacity-0" href=`/app/building/${animal.locatedAt.object}`) #{animal.locatedAt.object}
                    - else
                        dd.col-lg-9 
                          - if (animal.locatedAt.object.includes('AgriParcel'))
                            a(class="link-underline link-underline-opacity-0" href=`/app/agriparcel/${animal.locatedAt.object}`) #{animal.locatedAt.object}
                          - if (animal.locatedAt.object.includes('Building'))
                            a(class="link-underline link-underline-opacity-0" href=`/app/building/${animal.locatedAt.object}`) #{animal.locatedAt.object}
                  - if (animal.location && animal.location.value.coordinates)
                    dt.col-lg-3 
                      | Current Location: 
                      - if (animal.location && animal.location.providedBy)
                        br
                        small
                          | Data Provided by
                    dd.col-lg-3 
                      | #{animal.location.value.coordinates[1]}&deg;N, #{animal.location.value.coordinates[0]}&deg;E

                      - if (animal.location && animal.location.providedBy)
                        br
                        small
                          a(class="link-underline link-underline-opacity-0" href=`/app/agri-device/${animal.location.providedBy.object}`) #{animal.location.providedBy.object}
                  - if (animal.ownedBy)
                    dt.col-lg-3 Owned By: 
                    dd.col-lg-9 
                      a(class="link-underline link-underline-opacity-0" href=`/app/person/${animal.ownedBy.object}`) #{animal.ownedBy.object}


                     

  - if (animal.comment)
    div.row
      div.col
        div(class="card m-2")
          div.card-body
            h3 Comment
            pre 
              | #{animal.comment.value}
  div.row
    div.col
      div(class="card m-2")
        div.card-body
          summary.list-unstyled Entity (normalised)
            details
              pre 
                code #{JSON.stringify(animal, null, 4)}
